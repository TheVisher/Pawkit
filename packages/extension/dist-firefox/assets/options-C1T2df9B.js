import{c as w,i as O,j as e,r as n,S as f,C as l,b as h,d as x,k as y,e as u,L as b,B as m,g as E,I as R,f as _,h as g}from"./index-5L2zFSJU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=w("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=w("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),W="https://getpawkit.com/extension/auth?source=extension";function $(){const[o,k]=n.useState(""),[c,d]=n.useState(""),[p,C]=n.useState(!1),[j,v]=n.useState(!1),[N,S]=n.useState(!1),[M,i]=n.useState(!1),[T,r]=n.useState("");n.useEffect(()=>{(async()=>{try{const t=await g.runtime.sendMessage({type:"GET_TOKEN"});t.token&&d(t.token)}catch(t){console.error("Failed to load token:",t)}})();const a=t=>{t.origin==="https://getpawkit.com"&&t.data.type==="PAWKIT_AUTH_SUCCESS"&&t.data.token&&P(t.data.token)};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[]);const P=async s=>{S(!1);try{const a={type:"SET_TOKEN",token:s};await g.runtime.sendMessage(a),d(s),i(!0),r(""),setTimeout(()=>i(!1),3e3)}catch(a){r(a instanceof Error?a.message:"Failed to save token")}},A=()=>{S(!0),r("");const s=500,a=600,t=(window.screen.width-s)/2,F=(window.screen.height-a)/2;window.open(W,"Pawkit Authorization",`width=${s},height=${a},left=${t},top=${F}`)},L=async()=>{if(!o.trim()){r("Token cannot be empty");return}v(!0),r(""),i(!1);try{const s={type:"SET_TOKEN",token:o.trim()};await g.runtime.sendMessage(s),d(o.trim()),k(""),i(!0),setTimeout(()=>i(!1),3e3)}catch(s){r(s instanceof Error?s.message:"Failed to save token")}finally{v(!1)}},I=async()=>{try{const s={type:"SET_TOKEN",token:""};await g.runtime.sendMessage(s),d(""),k(""),i(!1)}catch(s){r(s instanceof Error?s.message:"Failed to revoke token")}},z=s=>s.length<=8?"•".repeat(s.length):s.slice(0,4)+"•".repeat(Math.min(20,s.length-8))+s.slice(-4);return e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pawkit Web Clipper Settings"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure your authentication token to save pages to Pawkit"})]}),e.jsx(f,{}),e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Authentication Status"}),e.jsx(y,{children:c?"You are authenticated and ready to save pages":"No authentication token set"})]}),e.jsx(u,{children:c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{children:"Current Token:"}),e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:p?c:z(c)}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>C(!p),children:p?e.jsx(K,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"})})]}),e.jsx(m,{variant:"destructive",onClick:I,children:"Revoke Token"})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set your token below to start saving pages"})})]}),e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Easy Setup"}),e.jsx(y,{children:"Sign in with your Pawkit account to authorize the extension"})]}),e.jsx(u,{children:e.jsx(m,{onClick:A,disabled:N,className:"w-full bg-gradient-to-r from-[#6d5cff] to-[#a36bff] hover:from-[#5d4cef] hover:to-[#9358ef]",size:"lg",children:N?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-5 w-5 animate-spin"}),"Waiting for authorization..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),"Sign in with Pawkit"]})})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"OR"}),e.jsx(f,{className:"flex-1"})]}),e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Manual Token Setup"}),e.jsx(y,{children:"Advanced: Manually paste your authentication token"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"token",children:"Personal Access Token"}),e.jsx(R,{id:"token",type:"password",value:o,onChange:s=>k(s.target.value),placeholder:"Paste your token here...",disabled:j}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your token is stored locally and used to authenticate API requests"})]}),T&&e.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded p-2",children:T}),M&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-400 bg-green-400/10 border border-green-400/20 rounded p-2",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Token saved successfully!"})]}),e.jsx(m,{onClick:L,disabled:j||!o.trim(),className:"bg-gradient-to-r from-[#6d5cff] to-[#a36bff] hover:from-[#5d4cef] hover:to-[#9358ef]",children:j?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Token"})]})]}),e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(x,{children:"How to use"})}),e.jsx(u,{className:"space-y-2 text-sm text-muted-foreground",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:'Click "Sign in with Pawkit" to authorize the extension'}),e.jsx("li",{children:"Click the extension icon on any page to save it to Pawkit"}),e.jsx("li",{children:'Right-click any page or link and select "Save page to Pawkit"'}),e.jsx("li",{children:"Add optional notes before saving"})]})})]})]})})}O.createRoot(document.getElementById("root")).render(e.jsx($,{}));
