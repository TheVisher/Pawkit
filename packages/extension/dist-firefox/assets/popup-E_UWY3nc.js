import{c as w,r as s,j as e,a as P,C as M,b as q,d as I,B as h,e as U,L as x,I as N,f as V,S as A,g as B,h as c,i as H,R as O}from"./index-5L2zFSJU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=s.forwardRef(({className:n,...d},r)=>e.jsx("textarea",{className:P("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...d}));y.displayName="Textarea";function G(){const[n,d]=s.useState(""),[r,p]=s.useState(""),[v,f]=s.useState(""),[u,k]=s.useState(""),[o,g]=s.useState(!1),[S,j]=s.useState(!1),[b,i]=s.useState(""),[C,E]=s.useState(null),[m,L]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const[t]=await c.tabs.query({active:!0,currentWindow:!0});if(t&&(d(t.title||""),p(t.url||""),t.url)){const F=new URL(t.url).hostname;k(`https://www.google.com/s2/favicons?domain=${F}&sz=32`)}const l=await c.runtime.sendMessage({type:"GET_TOKEN"});L(!!l.token)}catch(t){console.error("Failed to initialize popup:",t)}})()},[]);const R=async()=>{var a;if(!n.trim()||!r.trim()){i("Title and URL are required");return}if(!m){i("No authentication token found. Please set your token in options.");return}g(!0),i(""),j(!1);try{const t={type:"SAVE_CARD",payload:{title:n.trim(),url:r.trim(),notes:v.trim()||void 0,source:"webext",meta:{favicon:u}}},l=await c.runtime.sendMessage(t);l.ok?(j(!0),E(((a=l.data)==null?void 0:a.id)||null),f("")):i(l.error||"Failed to save card")}catch(t){i(t instanceof Error?t.message:"Failed to save card")}finally{g(!1)}},T=()=>{c.runtime.openOptionsPage()},z=()=>{c.tabs.create({url:"https://getpawkit.com/home"})};return e.jsx("div",{className:"w-96 min-h-[400px]",children:e.jsxs(M,{className:"border-0 rounded-none shadow-none",children:[e.jsxs(q,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:"text-xl",children:"Save to Pawkit"}),e.jsx(h,{variant:"ghost",size:"icon",onClick:T,title:"Settings",children:e.jsx(D,{className:"h-4 w-4"})})]}),!m&&e.jsx("div",{className:"text-xs text-muted-foreground bg-destructive/10 border border-destructive/20 rounded p-2 mt-2",children:"No token set. Click the settings icon to add your authentication token."})]}),e.jsxs(U,{className:"space-y-4",children:[u&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("img",{src:u,alt:"",className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:new URL(r).hostname})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"title",children:"Title"}),e.jsx(N,{id:"title",value:n,onChange:a=>d(a.target.value),placeholder:"Page title",disabled:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"url",children:"URL"}),e.jsx(N,{id:"url",value:r,onChange:a=>p(a.target.value),placeholder:"https://...",disabled:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(y,{id:"notes",value:v,onChange:a=>f(a.target.value),placeholder:"Add your notes...",className:"min-h-[100px] resize-none",disabled:o})]}),b&&e.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded p-2",children:b}),S&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-400 bg-green-400/10 border border-green-400/20 rounded p-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"Saved successfully!"}),C&&e.jsxs(h,{variant:"link",size:"sm",className:"ml-auto h-auto p-0 text-green-400",onClick:z,children:["View ",e.jsx(_,{className:"ml-1 h-3 w-3"})]})]}),e.jsx(A,{}),e.jsx(h,{onClick:R,disabled:o||!m,className:"w-full bg-gradient-to-r from-[#6d5cff] to-[#a36bff] hover:from-[#5d4cef] hover:to-[#9358ef]",children:o?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save to Pawkit"})]})]})})}H.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(G,{})}));
