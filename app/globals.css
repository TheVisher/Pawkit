@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   PAWKIT DESIGN SYSTEM v2.0 - TOKENS
   ======================================== */

:root {
  color-scheme: dark;

  /* === CORE HSL VALUES === */
  --hue-neutral: 0;
  --hue-purple: 270;

  /* === PURPLE ACCENT SCALE === */
  --purple-sat: 60%;
  --ds-accent: hsl(var(--hue-purple) var(--purple-sat) 55%);
  --ds-accent-hover: hsl(var(--hue-purple) var(--purple-sat) 65%);
  --ds-accent-active: hsl(var(--hue-purple) var(--purple-sat) 45%);
  --ds-accent-muted: hsl(var(--hue-purple) var(--purple-sat) 35%);
  --ds-accent-subtle: hsl(var(--hue-purple) var(--purple-sat) 20%);

  /* === SPACING SYSTEM (4px grid) === */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;

  /* === BORDER RADIUS SYSTEM === */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* === TYPOGRAPHY === */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --text-xs: 11px;
  --text-sm: 13px;
  --text-base: 14px;
  --text-lg: 16px;
  --text-xl: 18px;
  --text-2xl: 24px;
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;

  /* === TRANSITIONS === */
  --transition-fast: 0.1s ease;
  --transition-base: 0.15s ease;
  --transition-slow: 0.25s ease;
}

/* === DARK MODE (Default) === */
:root, [data-theme="dark"] {
  /* Backgrounds - 5% steps for visible layering */
  --bg-base: hsl(0 0% 4%);
  --bg-surface-1: hsl(0 0% 9%);
  --bg-surface-2: hsl(0 0% 14%);
  --bg-surface-3: hsl(0 0% 19%);
  --bg-surface-4: hsl(0 0% 24%);

  /* Text */
  --text-primary: hsl(var(--hue-neutral) 0% 95%);
  --text-secondary: hsl(var(--hue-neutral) 0% 70%);
  --text-muted: hsl(var(--hue-neutral) 0% 50%);
  --text-disabled: hsl(var(--hue-neutral) 0% 35%);

  /* Borders - neumorphism-lite highlights */
  --border-subtle: hsl(0 0% 100% / 0.06);
  --border-default: hsl(0 0% 100% / 0.08);
  --border-strong: hsl(0 0% 100% / 0.12);
  --border-divider: hsl(0 0% 100% / 0.08);
  --border-highlight-top: hsl(0 0% 100% / 0.1);
  --border-highlight-left: hsl(0 0% 100% / 0.08);
  --content-top-shadow: transparent;

  /* Shadows - Two-part: dark shadow + light edge highlight */
  --shadow-1:
    0 2px 4px hsl(0 0% 0% / 0.5),
    0 0 0 1px hsl(0 0% 100% / 0.05);
  --shadow-2:
    0 4px 8px hsl(0 0% 0% / 0.5),
    0 8px 16px hsl(0 0% 0% / 0.3),
    0 0 0 1px hsl(0 0% 100% / 0.05);
  --shadow-3:
    0 8px 16px hsl(0 0% 0% / 0.5),
    0 16px 32px hsl(0 0% 0% / 0.3),
    0 0 0 1px hsl(0 0% 100% / 0.08);
  --shadow-4:
    0 16px 32px hsl(0 0% 0% / 0.5),
    0 32px 64px hsl(0 0% 0% / 0.3),
    0 0 0 1px hsl(0 0% 100% / 0.1);

  /* Glow effects - more visible purple glow */
  --glow-hover:
    0 0 20px hsl(270 60% 50% / 0.4),
    0 4px 12px hsl(0 0% 0% / 0.4);
  --glow-focus: 0 0 0 3px hsl(var(--hue-purple) var(--purple-sat) 50% / 0.4);
  --glow-active:
    0 0 30px hsl(270 60% 50% / 0.5),
    0 8px 24px hsl(0 0% 0% / 0.5);

  /* Neumorphic effects - Dark mode */
  --inset-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.4), inset 0 1px 3px rgba(0, 0, 0, 0.3), inset 0 -1px 0 rgba(255, 255, 255, 0.08);
  --inset-border: 1px solid rgba(0, 0, 0, 0.3);
  --inset-border-bottom: rgba(255, 255, 255, 0.12);
  --inset-border-right: rgba(255, 255, 255, 0.06);
  --raised-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.08);
  --raised-shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.08);
  --raised-border-top: rgba(255, 255, 255, 0.12);
  --slider-inset: inset 0 2px 4px rgba(0, 0, 0, 0.4), inset 0 1px 2px rgba(0, 0, 0, 0.3);
  --slider-inset-border-bottom: rgba(255, 255, 255, 0.1);
}

/* === CLASSIC PURPLE THEME (Dark + Purple Tint + Glass) === */
[data-ui-style="classic"] {
  /* Base - solid purple-tinted background (shows through glass) */
  --bg-base: hsl(270 30% 6%);

  /* Glass surfaces - semi-transparent with purple tint */
  --bg-surface-1: hsl(270 30% 12% / 0.70);
  --bg-surface-2: hsl(270 25% 18% / 0.75);
  --bg-surface-3: hsl(270 20% 24% / 0.80);
  --bg-surface-4: hsl(270 18% 30% / 0.85);

  /* Glass effect properties */
  --glass-blur: 12px;
  --glass-saturate: 1.2;

  /* Slightly purple-tinted borders - more visible for glass */
  --border-subtle: hsl(270 40% 100% / 0.12);
  --border-default: hsl(270 40% 100% / 0.15);
  --border-strong: hsl(270 40% 100% / 0.20);
  --border-divider: hsl(270 40% 100% / 0.12);
  --border-highlight-top: hsl(270 50% 100% / 0.18);
  --border-highlight-left: hsl(270 50% 100% / 0.15);

  /* Enhanced purple glow */
  --glow-hover:
    0 0 24px hsl(270 70% 55% / 0.5),
    0 4px 12px hsl(0 0% 0% / 0.4);
  --glow-active:
    0 0 36px hsl(270 70% 55% / 0.6),
    0 8px 24px hsl(0 0% 0% / 0.5);
}

/* Glass effect for panels in classic mode */
[data-ui-style="classic"] .surface-1,
[data-ui-style="classic"] .surface-2,
[data-ui-style="classic"] .surface-3,
[data-ui-style="classic"] .surface-4 {
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
}

/* Apply glass to main layout panels */
[data-ui-style="classic"] [data-panel="left"],
[data-ui-style="classic"] [data-panel="right"],
[data-ui-style="classic"] [data-panel="content"] {
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
}

/* === LIGHT MODE === */
[data-theme="light"], :root.light {
  /* Backgrounds - light mode: shadows create depth, colors stay similar */
  --bg-base: hsl(var(--hue-neutral) 0% 90%);
  --bg-surface-1: hsl(var(--hue-neutral) 0% 88%);  /* Inset areas - slightly darker */
  --bg-surface-2: hsl(var(--hue-neutral) 0% 93%);  /* Panels/cards - lighter */
  --bg-surface-3: hsl(var(--hue-neutral) 0% 97%);  /* Raised buttons - near white */
  --bg-surface-4: hsl(var(--hue-neutral) 0% 100%); /* Most raised - white */

  /* Text */
  --text-primary: hsl(var(--hue-neutral) 0% 5%);
  --text-secondary: hsl(var(--hue-neutral) 0% 30%);
  --text-muted: hsl(var(--hue-neutral) 0% 50%);
  --text-disabled: hsl(var(--hue-neutral) 0% 65%);

  /* Borders */
  --border-subtle: hsl(var(--hue-neutral) 0% 0% / 0.10);
  --border-default: hsl(var(--hue-neutral) 0% 0% / 0.15);
  --border-strong: hsl(var(--hue-neutral) 0% 0% / 0.20);
  --border-divider: hsl(var(--hue-neutral) 0% 0% / 0.12);

  /* Shadows - soft dark shadows only in light mode */
  --shadow-color: var(--hue-neutral) 0% 0%;
  --shadow-1: 0 2px 4px hsl(var(--shadow-color) / 0.08), 0 1px 2px hsl(var(--shadow-color) / 0.06);
  --shadow-2: 0 4px 8px hsl(var(--shadow-color) / 0.10), 0 2px 4px hsl(var(--shadow-color) / 0.08);
  --shadow-3: 0 8px 16px hsl(var(--shadow-color) / 0.12), 0 4px 8px hsl(var(--shadow-color) / 0.10);
  --shadow-4: 0 12px 24px hsl(var(--shadow-color) / 0.14), 0 6px 12px hsl(var(--shadow-color) / 0.12);

  /* Glow effects - softer in light mode */
  --glow-hover: 0 0 20px hsl(var(--hue-purple) var(--purple-sat) 50% / 0.2);
  --glow-focus: 0 0 0 3px hsl(var(--hue-purple) var(--purple-sat) 50% / 0.2);
  --glow-active: 0 0 30px hsl(var(--hue-purple) var(--purple-sat) 50% / 0.3);

  /* Neumorphic effects - Light mode (dark shadows only for depth) */
  --border-highlight-top: transparent;
  --border-highlight-left: transparent;
  --content-top-shadow: rgba(100, 80, 150, 0.08);
  --inset-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.12), inset 0 1px 2px rgba(0, 0, 0, 0.08);
  --inset-border: 1px solid rgba(0, 0, 0, 0.08);
  --inset-border-bottom: rgba(0, 0, 0, 0.04);
  --inset-border-right: rgba(0, 0, 0, 0.04);
  --raised-shadow: 0 2px 6px rgba(0, 0, 0, 0.12), 0 1px 3px rgba(0, 0, 0, 0.08);
  --raised-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.06);
  --raised-border-top: rgba(255, 255, 255, 0.5);
  --slider-inset: inset 0 2px 4px rgba(0, 0, 0, 0.10), inset 0 1px 2px rgba(0, 0, 0, 0.06);
  --slider-inset-border-bottom: rgba(0, 0, 0, 0.04);

  /* Accent colors - darker for light mode contrast */
  --ds-accent: hsl(var(--hue-purple) var(--purple-sat) 45%);
  --ds-accent-hover: hsl(var(--hue-purple) var(--purple-sat) 40%);
  --ds-accent-active: hsl(var(--hue-purple) var(--purple-sat) 35%);
  --ds-accent-muted: hsl(var(--hue-purple) var(--purple-sat) 90%);  /* Light purple background */
  --ds-accent-subtle: hsl(var(--hue-purple) var(--purple-sat) 95%); /* Very light purple bg */
}

/* ========================================
   END DESIGN SYSTEM TOKENS
   ======================================== */

body {
  @apply min-h-screen antialiased text-gray-900;
  background-attachment: fixed;
  background-color: #e6e6e6;
  background-image:
    radial-gradient(1200px circle at 12% 0%, rgba(122, 92, 250, 0.25), rgba(230, 230, 230, 0)),
    radial-gradient(900px circle at 88% 8%, rgba(122, 92, 250, 0.20), rgba(230, 230, 230, 0)),
    radial-gradient(600px circle at 25% 90%, rgba(122, 92, 250, 0.18), rgba(230, 230, 230, 0)),
    linear-gradient(160deg, rgba(232, 232, 232, 1), rgba(226, 226, 226, 1));
}

.dark body {
  @apply text-gray-100;
  background-color: #0a0814;
  background-image:
    radial-gradient(1200px circle at 12% 0%, rgba(122, 92, 250, 0.28), rgba(10, 8, 20, 0)),
    radial-gradient(900px circle at 88% 8%, rgba(122, 92, 250, 0.18), rgba(10, 8, 20, 0)),
    radial-gradient(600px circle at 25% 90%, rgba(122, 92, 250, 0.14), rgba(10, 8, 20, 0)),
    linear-gradient(160deg, rgba(10, 8, 20, 0.96), rgba(5, 5, 12, 1));
}

button:focus-visible,
input:focus-visible,
textarea:focus-visible {
  @apply outline outline-2 outline-offset-2 outline-accent;
}

/* Reader Mode Styles */
.reader-content {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 20px;
  line-height: 1.7;
  color: #1a1a1a;
}

.reader-content h1,
.reader-content h2,
.reader-content h3,
.reader-content h4,
.reader-content h5,
.reader-content h6 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-weight: 700;
  color: #000;
  margin-top: 2em;
  margin-bottom: 0.75em;
  line-height: 1.3;
}

.reader-content h1 { font-size: 2em; }
.reader-content h2 { font-size: 1.5em; }
.reader-content h3 { font-size: 1.25em; }

.reader-content p {
  margin-bottom: 1.5em;
}

.reader-content a {
  color: #0066cc;
  text-decoration: none;
  border-bottom: 1px solid #0066cc33;
}

.reader-content a:hover {
  border-bottom-color: #0066cc;
}

.reader-content img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 2em 0;
}

.reader-content blockquote {
  border-left: 4px solid #e0e0e0;
  padding-left: 1.5em;
  margin: 2em 0;
  font-style: italic;
  color: #555;
}

.reader-content pre {
  background: #f5f5f5;
  border-radius: 4px;
  padding: 1em;
  overflow-x: auto;
  font-size: 0.9em;
}

.reader-content code {
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
}

.reader-content ul,
.reader-content ol {
  margin: 1.5em 0;
  padding-left: 2em;
}

.reader-content li {
  margin-bottom: 0.5em;
}

/* Custom scrollbar for modal */
.modal-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.modal-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.modal-scrollbar::-webkit-scrollbar-thumb {
  background: rgb(55, 65, 81);
  border-radius: 3px;
}

.modal-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgb(75, 85, 99);
}

/* Global dark scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: rgb(55, 65, 81) rgb(17, 24, 39);
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: rgb(17, 24, 39);
}

*::-webkit-scrollbar-thumb {
  background: rgb(55, 65, 81);
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
  background: rgb(75, 85, 99);
}



@layer base {
  :root {
    /* Default accent color (purple) - will be overridden by JS */
    --accent-h: 270;
    --accent-s: 70%;
    --accent-l: 60%;

    /* Light mode colors */
    --background: 0 0% 100%;
    --foreground: 240 10% 10%;
    --surface: 0 0% 98%;
    --surface-muted: 240 5% 94%;
    --surface-soft: 240 8% 88%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 10%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 90%;
    --muted-foreground: 240 5% 35%;
    --accent: var(--accent-h) var(--accent-s) var(--accent-l);
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 80%;
    --border-strong: 240 5.9% 70%;
    --input: 240 5.9% 90%;
    --ring: var(--accent-h) var(--accent-s) var(--accent-l);
    --chart-1: var(--accent-h) var(--accent-s) var(--accent-l);
    --chart-2: 222 76% 65%;
    --chart-3: 190 68% 62%;
    --chart-4: 40 90% 65%;
    --chart-5: 340 82% 65%;
    --radius: 0.75rem;
  }

  .dark {
    /* Default accent color (purple) - will be overridden by JS */
    --accent-h: 270;
    --accent-s: 70%;
    --accent-l: 60%;

    /* Dark mode colors - neutral grays matching design system */
    --background: 0 0% 4%;
    --foreground: 0 0% 95%;
    --surface: 0 0% 11%;
    --surface-muted: 0 0% 15%;
    --surface-soft: 0 0% 19%;
    --card: 0 0% 11%;
    --card-foreground: 0 0% 95%;
    --popover: 0 0% 11%;
    --popover-foreground: 0 0% 95%;
    --primary: 270 60% 55%;
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 95%;
    --muted: 0 0% 19%;
    --muted-foreground: 0 0% 70%;
    --accent: var(--accent-h) var(--accent-s) var(--accent-l);
    --accent-foreground: 0 0% 100%;
    --destructive: 0 70% 48%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 20%;
    --border-strong: 0 0% 30%;
    --input: 0 0% 20%;
    --ring: var(--accent-h) var(--accent-s) var(--accent-l);
    --chart-1: var(--accent-h) var(--accent-s) var(--accent-l);
    --chart-2: 222 76% 65%;
    --chart-3: 190 68% 62%;
    --chart-4: 40 90% 65%;
    --chart-5: 340 82% 65%;
    --radius: 0.75rem;
  }

  .bg-gray-950 {
    background-color: hsl(var(--surface)) !important;
  }

  .bg-gray-900 {
    background-color: hsl(var(--surface-muted)) !important;
  }

  .border-gray-800 {
    border-color: hsl(var(--border)) !important;
  }

  .border-gray-700 {
    border-color: hsl(var(--border-strong)) !important;
  }

  .text-gray-100 {
    color: hsl(var(--foreground)) !important;
  }

  .text-gray-300 {
    color: hsl(var(--muted-foreground)) !important;
  }

  .text-gray-400 {
    color: hsl(var(--muted-foreground)) !important;
  }
  :root {
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
  .dark {
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer utilities {
  .bg-surface {
    background-color: hsl(var(--surface));
  }

  .bg-surface-muted {
    background-color: hsl(var(--surface-muted));
  }

  .bg-surface-soft {
    background-color: hsl(var(--surface-soft));
  }

  .bg-surface-90 {
    background-color: hsla(var(--surface) / 0.9);
  }

  .bg-surface-80 {
    background-color: hsla(var(--surface) / 0.8);
  }

  .border-subtle {
    border-color: hsl(var(--border));
  }

  .border-strong {
    border-color: hsl(var(--border-strong));
  }

  .shadow-panel {
    box-shadow: 0 24px 60px rgba(5, 5, 12, 0.45);
  }

  /* === DESIGN SYSTEM v2.0 UTILITIES === */

  /* Elevation utilities */
  .elevation-0 { box-shadow: none; }
  .elevation-1 { box-shadow: var(--shadow-1); }
  .elevation-2 { box-shadow: var(--shadow-2); }
  .elevation-3 { box-shadow: var(--shadow-2); transform: translateY(-1px); }
  .elevation-4 { box-shadow: var(--shadow-3); }
  .elevation-5 { box-shadow: var(--shadow-4); }

  /* Surface backgrounds (design system) */
  .surface-base { background: var(--bg-base); }
  .surface-1 { background: var(--bg-surface-1); }
  .surface-2 { background: var(--bg-surface-2); }
  .surface-3 { background: var(--bg-surface-3); }
  .surface-4 { background: var(--bg-surface-4); }

  /* Text colors (design system) */
  .text-ds-primary { color: var(--text-primary); }
  .text-ds-secondary { color: var(--text-secondary); }
  .text-ds-muted { color: var(--text-muted); }
  .text-ds-disabled { color: var(--text-disabled); }

  /* Border colors (design system) */
  .border-ds-subtle { border-color: var(--border-subtle); }
  .border-ds-default { border-color: var(--border-default); }
  .border-ds-strong { border-color: var(--border-strong); }

  /* Glow utilities */
  .glow-hover { box-shadow: var(--glow-hover); }
  .glow-focus { box-shadow: var(--glow-focus); }
  .glow-active { box-shadow: var(--glow-active); }

  /* Transition utilities */
  .transition-fast { transition: all var(--transition-fast); }
  .transition-base { transition: all var(--transition-base); }
  .transition-slow { transition: all var(--transition-slow); }

  /* Note card with paper fold effect (like MyMind) */
  .note-card-fold {
    position: relative;
    overflow: hidden;
  }

  /* Triangle that "cuts out" the corner - matches page background */
  .note-card-fold::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0 28px 28px 0;
    border-color: transparent var(--bg-base) transparent transparent;
    z-index: 20;
  }

  /* The fold shadow underneath */
  .note-card-fold::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, var(--bg-surface-3) 50%, transparent 50%);
    z-index: 19;
  }

  /* === END DESIGN SYSTEM v2.0 UTILITIES === */

  /* Neumorphism-lite elevated surface styling */
  .elevated {
    border: 1px solid var(--border-subtle);
    border-top-color: var(--border-highlight-top);
    border-left-color: var(--border-highlight-left);
  }

  .card-hover {
    position: relative;
    overflow: hidden;
    background: var(--bg-surface-2);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-2);
    border: 1px solid var(--border-subtle);
    border-top-color: var(--border-highlight-top);
    border-left-color: var(--border-highlight-left);
    transition: transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  }

  .card-hover::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    background: linear-gradient(180deg, hsla(var(--accent) / 0) 0%, hsla(var(--accent) / 0.12) 55%, hsla(var(--accent) / 0.42) 100%);
    opacity: 0;
    transition: opacity var(--transition-base);
  }

  .card-hover:hover {
    transform: translateY(-4px);
    box-shadow: var(--glow-hover), var(--shadow-3);
    border-color: hsl(0 0% 100% / 0.1);
  }

  .card-hover:hover::after {
    opacity: 1;
  }

  .card-hover:active {
    transform: translateY(-1px);
    box-shadow: var(--shadow-1);
  }

  .card-hover.is-selected::after,
  .card-hover.is-selected:hover::after {
    opacity: 1;
  }

  .card-hover.is-selected {
    border-color: var(--ds-accent);
    box-shadow: var(--glow-hover), var(--shadow-2);
  }

  /* Hide scrollbars but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }

  /* Sidebar scrollbar - overlay mode, doesn't shift content */
  .sidebar-scroll {
    overflow-y: overlay;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
  }

  /* Fallback for browsers that don't support overlay */
  @supports not (overflow-y: overlay) {
    .sidebar-scroll {
      overflow-y: auto;
    }
  }

  .sidebar-scroll::-webkit-scrollbar {
    width: 6px;
  }

  .sidebar-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .sidebar-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 3px;
  }

  .sidebar-scroll::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
  }

  /* Landing page animations */
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes float-delayed {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-15px);
    }
  }

  @keyframes bounce-slow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: float-delayed 8s ease-in-out infinite;
  }

  .animate-bounce-slow {
    animation: bounce-slow 3s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
  }

  .fade-in-section {
    opacity: 0;
  }
}

/* Shadcn Sidebar Custom Styling */
@layer base {
  [data-sidebar="sidebar"] {
    background-color: hsl(var(--surface)) !important;
    border-color: hsl(var(--border)) !important;
  }

  [data-sidebar="sidebar"] [data-sidebar="header"],
  [data-sidebar="sidebar"] [data-sidebar="content"],
  [data-sidebar="sidebar"] [data-sidebar="footer"] {
    background-color: transparent !important;
  }

  [data-sidebar="sidebar"] [data-sidebar="menu-button"],
  [data-sidebar="sidebar"] [data-sidebar="menu-sub-button"] {
    color: hsl(var(--muted-foreground));
  }

  [data-sidebar="sidebar"] [data-sidebar="menu-button"]:hover,
  [data-sidebar="sidebar"] [data-sidebar="menu-sub-button"]:hover {
    background-color: hsla(var(--surface-muted) / 0.8);
    color: hsl(var(--foreground));
  }

  [data-sidebar="sidebar"] [data-sidebar="menu-button"][data-active="true"],
  [data-sidebar="sidebar"] [data-sidebar="menu-sub-button"][data-active="true"] {
    background-color: hsl(var(--surface-muted));
    color: hsl(var(--foreground));
  }

  [data-sidebar="sidebar"] [data-sidebar="group-label"] {
    color: hsl(var(--muted-foreground));
  }
}



@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* React Big Calendar Dark Theme Styling */
.pawkit-calendar {
  color: hsl(var(--foreground));
}

.pawkit-calendar .rbc-header {
  background-color: hsl(var(--surface-muted));
  color: hsl(var(--foreground));
  border-color: hsl(var(--border));
  padding: 12px 8px;
  font-weight: 600;
  font-size: 0.875rem;
}

.pawkit-calendar .rbc-month-view,
.pawkit-calendar .rbc-time-view {
  background-color: transparent;
  border-color: hsl(var(--border));
}

.pawkit-calendar .rbc-day-bg {
  background-color: hsl(var(--surface));
  border-color: hsl(var(--border));
}

.pawkit-calendar .rbc-today {
  background-color: hsla(var(--accent) / 0.08);
}

.pawkit-calendar .rbc-off-range-bg {
  background-color: hsl(var(--surface-muted));
}

.pawkit-calendar .rbc-date-cell {
  padding: 6px 8px;
  color: hsl(var(--foreground));
  font-size: 0.875rem;
}

.pawkit-calendar .rbc-off-range {
  color: hsl(var(--muted-foreground));
  opacity: 0.4;
}

.pawkit-calendar .rbc-current {
  color: hsl(var(--accent));
  font-weight: 700;
}

.pawkit-calendar .rbc-event {
  background-color: hsla(var(--accent) / 0.2);
  border: 1px solid hsla(var(--accent) / 0.4);
  color: hsl(var(--foreground));
  border-radius: 6px;
  padding: 2px 6px;
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pawkit-calendar .rbc-event:hover {
  background-color: hsla(var(--accent) / 0.3);
  border-color: hsla(var(--accent) / 0.6);
  transform: translateY(-1px);
}

/* Daily note pills - custom styling and positioning */
.pawkit-calendar .rbc-event.daily-note-event {
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
  width: auto !important;
  height: auto !important;
  margin: 0 !important;
  position: static !important;
  display: flex !important;
  align-items: flex-end !important;
  justify-content: center !important;
  margin-top: auto !important;
}

.pawkit-calendar .rbc-event.daily-note-event:hover {
  background-color: transparent !important;
  transform: none !important;
  box-shadow: none !important;
}

.pawkit-calendar .rbc-event.daily-note-event:focus {
  background-color: transparent !important;
  outline: none !important;
}

.pawkit-calendar .rbc-event.daily-note-event.rbc-selected {
  background-color: transparent !important;
  outline: none !important;
}

/* Make the row segment use flexbox with items at bottom */
.pawkit-calendar .rbc-row-segment:has(.daily-note-event) {
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-end !important;
  align-items: center !important;
  padding-bottom: 4px !important;
  min-height: 100% !important;
}

.pawkit-calendar .rbc-event-label {
  color: hsl(var(--muted-foreground));
  font-size: 0.7rem;
}

.pawkit-calendar .rbc-toolbar {
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 1rem;
}

.pawkit-calendar .rbc-toolbar button {
  background-color: hsl(var(--surface-soft));
  border: 1px solid hsl(var(--border));
  color: hsl(var(--foreground));
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pawkit-calendar .rbc-toolbar button:hover {
  background-color: hsl(var(--surface-muted));
  border-color: hsl(var(--border-strong));
}

.pawkit-calendar .rbc-toolbar button.rbc-active {
  background-color: hsl(var(--accent));
  color: hsl(var(--accent-foreground));
  border-color: hsl(var(--accent));
}

.pawkit-calendar .rbc-toolbar button.rbc-active:hover {
  background-color: hsl(var(--accent));
  opacity: 0.9;
}

.pawkit-calendar .rbc-toolbar-label {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 1.125rem;
}

.pawkit-calendar .rbc-show-more {
  background-color: transparent;
  color: hsl(var(--accent));
  font-size: 0.75rem;
  padding: 2px;
  margin: 0;
}

.pawkit-calendar .rbc-show-more:hover {
  text-decoration: underline;
}

.pawkit-calendar .rbc-overlay {
  background-color: hsl(var(--surface));
  border: 1px solid hsl(var(--border));
  border-radius: 0.75rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  padding: 1rem;
}

.pawkit-calendar .rbc-overlay-header {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 0.875rem;
  margin-bottom: 0.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid hsl(var(--border));
}

/* Ticker tape animations for landing page */
@keyframes ticker-left {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

@keyframes ticker-right {
  0% {
    transform: translateX(-50%);
  }
  100% {
    transform: translateX(0);
  }
}

.animate-ticker-left {
  animation: ticker-left 40s linear infinite;
}

.animate-ticker-right {
  animation: ticker-right 40s linear infinite;
}

/* Fade edges for ticker - uses mask to fade content regardless of background */
.ticker-container {
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%);
  mask-image: linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%);
}

/* ========================================
   NOTE CARD PREVIEW - Rendered Markdown
   ======================================== */
.note-card-preview {
  font-size: 12px;
  line-height: 1.5;
  color: var(--text-secondary);
  overflow: hidden;
}

.note-card-preview p {
  margin: 0 0 0.5em 0;
}

.note-card-preview p:last-child {
  margin-bottom: 0;
}

/* Headings */
.note-card-preview h1,
.note-card-preview h2,
.note-card-preview h3,
.note-card-preview h4,
.note-card-preview h5,
.note-card-preview h6 {
  color: var(--text-primary);
  font-weight: 600;
  margin: 0 0 0.4em 0;
  line-height: 1.3;
}

.note-card-preview h1 { font-size: 1.1em; }
.note-card-preview h2 { font-size: 1.05em; }
.note-card-preview h3,
.note-card-preview h4,
.note-card-preview h5,
.note-card-preview h6 { font-size: 1em; }

/* Links */
.note-card-preview a {
  color: var(--ds-accent);
  text-decoration: none;
}

.note-card-preview a:hover {
  text-decoration: underline;
}

/* Lists */
.note-card-preview ul,
.note-card-preview ol {
  margin: 0.3em 0;
  padding-left: 1.2em;
}

.note-card-preview li {
  margin-bottom: 0.15em;
}

/* Task list checkboxes (GFM) */
.note-card-preview ul.contains-task-list {
  list-style: none;
  padding-left: 0;
}

.note-card-preview li.task-list-item {
  display: flex;
  align-items: flex-start;
  gap: 0.4em;
}

.note-card-preview input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  min-width: 14px;
  border: 2px solid var(--text-muted);
  border-radius: 3px;
  background: transparent;
  margin-top: 2px;
  cursor: default;
  position: relative;
}

.note-card-preview input[type="checkbox"]:checked {
  background: var(--ds-accent);
  border-color: var(--ds-accent);
}

.note-card-preview input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  left: 3px;
  top: 0px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Strikethrough for completed tasks */
.note-card-preview li.task-list-item:has(input:checked) > *:not(input) {
  text-decoration: line-through;
  opacity: 0.6;
}

/* Code */
.note-card-preview code {
  background: var(--bg-surface-3);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
}

.note-card-preview pre {
  background: var(--bg-surface-3);
  padding: 0.5em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0.4em 0;
}

.note-card-preview pre code {
  background: transparent;
  padding: 0;
}

/* Blockquotes */
.note-card-preview blockquote {
  border-left: 3px solid var(--ds-accent-muted);
  padding-left: 0.6em;
  margin: 0.4em 0;
  color: var(--text-muted);
  font-style: italic;
}

/* Bold and italic */
.note-card-preview strong {
  color: var(--text-primary);
  font-weight: 600;
}

.note-card-preview em {
  font-style: italic;
}

/* Horizontal rule */
.note-card-preview hr {
  border: none;
  border-top: 1px solid var(--border-subtle);
  margin: 0.6em 0;
}

/* Tables (basic support) */
.note-card-preview table {
  border-collapse: collapse;
  font-size: 0.9em;
  margin: 0.4em 0;
}

.note-card-preview th,
.note-card-preview td {
  border: 1px solid var(--border-subtle);
  padding: 0.2em 0.4em;
}

.note-card-preview th {
  background: var(--bg-surface-3);
  font-weight: 600;
}

/* ========================================
   DROPDOWN MENU ITEMS - Design System
   ======================================== */
.dropdown-menu-item {
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
}

.dropdown-menu-item:hover,
.dropdown-menu-item:focus {
  background: var(--bg-surface-2);
  color: var(--text-primary);
}

.dropdown-menu-item[data-highlighted] {
  background: var(--bg-surface-2);
  color: var(--text-primary);
}

.dropdown-menu-item[data-state="checked"],
.dropdown-menu-item[aria-checked="true"] {
  background: var(--ds-accent-subtle);
  color: var(--ds-accent);
}

/* ========================================
   FORM INPUTS - Design System
   ======================================== */
.ds-input {
  background: var(--bg-surface-1);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  transition: border-color var(--transition-base), box-shadow var(--transition-base);
}

.ds-input::placeholder {
  color: var(--text-muted);
}

.ds-input:focus {
  border-color: var(--ds-accent);
  box-shadow: var(--glow-focus);
  outline: none;
}

.ds-input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========================================
   BUTTONS - Design System
   ======================================== */
.ds-btn-primary {
  background: var(--ds-accent);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-1);
  transition: all var(--transition-base);
}

.ds-btn-primary:hover {
  background: var(--ds-accent-hover);
  box-shadow: var(--glow-hover), var(--shadow-2);
}

.ds-btn-primary:active {
  background: var(--ds-accent-active);
  box-shadow: var(--shadow-1);
}

.ds-btn-secondary {
  background: var(--bg-surface-2);
  color: var(--text-primary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  transition: all var(--transition-base);
}

.ds-btn-secondary:hover {
  background: var(--bg-surface-3);
  border-color: var(--border-default);
}

.ds-btn-ghost {
  background: transparent;
  color: var(--text-secondary);
  border: none;
  border-radius: var(--radius-md);
  transition: all var(--transition-base);
}

.ds-btn-ghost:hover {
  background: var(--bg-surface-2);
  color: var(--text-primary);
}

/* ========================================
   MUURI GRID - Masonry Layout
   ======================================== */
.muuri-grid {
  position: relative;
}

.muuri-item {
  display: block;
  position: absolute;
  z-index: 1;
  margin: 0;
  will-change: transform;
}

.muuri-item.muuri-item-dragging {
  z-index: 9999 !important;
  cursor: grabbing;
  /* Allow mouse events to pass through to elements beneath (e.g., pawkits for drop) */
  pointer-events: none;
  /* Ghost effect */
  opacity: 0.8;
}

/* When dragged to body via dragContainer, ensure it's above everything */
body > .muuri-item.muuri-item-dragging {
  z-index: 99999 !important;
}

/* Raise content panel z-index when a card is being dragged */
body.muuri-dragging [data-content-panel] {
  z-index: 200 !important;
}

.muuri-item.muuri-item-releasing {
  z-index: 2;
}

.muuri-item.muuri-item-hidden {
  z-index: 0;
  pointer-events: none;
}

.muuri-item-content {
  position: relative;
  width: 100%;
  height: 100%;
  cursor: grab;
}

.muuri-item-content:active {
  cursor: grabbing;
}

.muuri-item-placeholder {
  opacity: 0.7;
}

/* ===========================================
   REDISCOVER SERENDIPITY MODE - ORBIT ANIMATION
   =========================================== */

/* Orbit animation for floating cards */
@keyframes orbit {
  from {
    transform: translate(-50%, -50%) rotate(0deg) translateX(var(--orbit-radius, 350px)) rotate(0deg) scale(var(--orbit-scale, 0.4));
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg) translateX(var(--orbit-radius, 350px)) rotate(-360deg) scale(var(--orbit-scale, 0.4));
  }
}

/* Alternative: gentler floating/drifting animation */
@keyframes float-drift {
  0%, 100% {
    transform: translate(-50%, -50%) translateY(0px) scale(var(--card-scale, 0.4));
  }
  50% {
    transform: translate(-50%, -50%) translateY(-20px) scale(var(--card-scale, 0.4));
  }
}

/* Orbit card base styles */
.orbit-card {
  transition: filter 0.5s ease, opacity 0.5s ease;
  opacity: 0.7;
}

.orbit-card:hover {
  opacity: 1;
}

/* Serendipity action buttons */
.serendipity-action-btn {
  transition: all 0.2s ease;
}

.serendipity-action-btn:hover {
  transform: scale(1.05);
}

.serendipity-action-btn:active {
  transform: scale(0.98);
}
